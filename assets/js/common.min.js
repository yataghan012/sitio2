function fullPage() { $("#js-fullpage").fullpage({ easingcss3: "cubic-bezier(0.645, 0.045, 0.355, 1)", scrollingSpeed: 1e3, anchors: ["top", "works", "about", "contact"], navigation: !0, navigationPosition: "left", controlArrows: !1, animateAnchor: !1, onLeave: function (e, t, n) { 1 == e && anime({ targets: ".scrollDown", translateY: "180%", duration: 500, easing: "easeInOutCubic" }), 1 == t && anime({ targets: ".scrollDown", translateY: ["180%", 0], duration: 500, easing: "easeInOutCubic" }), 0 == state && (var a = ".fp-section-" + t; anime.timeline().add({ targets: a + " .image", scale: [.85, 1], translateX: ["10%", 0], translateZ: 0, easing: "easeOutCubic", duration: 1500, delay: 500 }).add({ targets: a + " .image__cover", translateX: [0, "110%"], translateZ: 0, easing: "easeInOutQuart", duration: function (e, t) { return 1200 - 200 * t }, offset: "-=1700" }).add({ targets: a + " .page-num p", translateY: ["100%", 0], translateZ: 0, easing: "easeInOutCubic", duration: 1e3, offset: "-=1200" }).add({ targets: a + " .js-letter", translateX: ["-105%", 0], translateZ: 0, easing: "easeInOutCubic", duration: 800, delay: function (e, t) { return 50 * t }, offset: "-=1500" }), 1 == e && anime({ targets: ".js-moon", translateX: [0, "100%"], translateZ: 0, opacity: [1, 0], easing: "easeOutCubic", duration: 800, delay: function (e, t) { return 50 * t } }), 1 == t && anime({ targets: ".js-moon", translateX: ["100%", 0], translateZ: 0, opacity: [0, 1], easing: "easeOutCubic", duration: 800, delay: function (e, t) { return 500 + 50 * t } })) }, afterRender: function() { $(".section").each(function (e) { var t = e + 1; $(this).addClass("fp-section-" + t) }) }})}function headerColor() { var e = $(".barba-container").attr("data-namespace"); $(window).on("scroll", function () { "top" !== e && $(window).scrollTop() > $(window).height() ? ($("header").addClass("js-color"), $(".back-arrow").addClass("js-color")) : ($("header").removeClass("js-color"), $(".back-arrow").removeClass("js-color")) }) } $('<img src="./assets/img/reile.jpg">'), $('<img src="./assets/img/about.jpg">'), $('<img src="./assets/img/contact.jpg">'), $(window).on("load", function () { anime.timeline().add({ targets: ".loader", translateY: [0, "-100%"], translateZ: 0, easing: "easeInOutCubic", duration: 800, complete: function () { $(".loader").addClass(".js-hidden") } }).add({ targets: ".js-moon", translateX: ["100%", 0], translateZ: 0, opacity: [0, 1], easing: "easeOutCubic", duration: 800, delay: function (e, t) { return 500 + 50 * t }, offset: "-=1000" }).add({ targets: ".active .js-letter", translateX: ["-105%", 0], translateZ: 0, easing: "easeInOutCubic", duration: 800, delay: function (e, t) { return 50 * t }, offset: "-=1200" }) }); var $win = $(window), fpnav = {}, image = {}, imageBig = {}, isSp = !1; $(function () { $win.on("load resize", function () { var e = window.innerWidth, t = Math.round(.8 * e / 1.76) + "px", n = Math.round(.53125 * e / 1.76) + "px"; isSp = !0, fpnav = { y: "100%", x: 0 }, image = { width: "80%", height: t, top: 0, marginRight: "10%", marginLeft: "10%" }, imageBig = { width: "100%", height: "65.492%", marginLeft: 0, top: 0 }, window.matchMedia("(min-width: 801px)").matches ? (isSp = !1, fpnav = { y: 0, x: "-100%" }, image = { width: "53.125%", height: Math.round(window.innerWidth * .53125 / 1.76) + "px", top: "auto", marginRight: "8%", marginLeft: "auto" }, imageBig = { width: "60.677%", height: "100vh", marginLeft: "auto", top: "auto" }) : window.matchMedia("(min-width: 421px)").matches && (isSp = !1, fpnav = { y: "100%", x: 0 }, image = { width: "53.125%", height: n, marginRight: 40, marginLeft: "auto" }, imageBig = { width: "60.677%", height: "100vh", top: "auto", marginLeft: "auto" }) }) }), Barba.Pjax.originalPreventCheck = Barba.Pjax.preventCheck, Barba.Pjax.preventCheck = function (e, t) { if (t && t.href && t.href.indexOf("#") > -1) { var n = window.location.href.split("#")[0].replace(/\/$/, ""), a = t.href.split("#")[0].replace(/\/$/, ""); if (n === a) return !1 } return Barba.Pjax.originalPreventCheck(e, t) }; var state = 0; Barba.Dispatcher.on("newPageReady", function () { $("#js-fullpage").length && (new Parallax($(".js-parallax-moon").get(0)), new Parallax($(".js-parallax-moonlight").get(0)), new Parallax($(".js-parallax-star").get(0))), isSp && $(".page-top").height($(window).height()), ga("send", "pageview", window.location.pathname.replace(/^\/?/, "/") + window.location.search) }), $(function () { fullPage(); var e = $(window).height(); $(".js-menuBtn").on("click", function () { $(".menuIcon").toggleClass("js-menuOpen"), $(".global-nav").toggleClass("js-open"), $(window).scrollTop() > e && $("header").toggleClass("js-color"), $(this).hasClass("js-menuOpen") ? Barba.Pjax.getTransition = function () { return PageTransitionCurtain } : $("#js-fullpage").length ? Barba.Pjax.getTransition = function () { return PageTransitionTop } : Barba.Pjax.getTransition = function () { return PageTransitionUnder } }) }); var topTransition = Barba.BaseView.extend({ namespace: "top", onEnter: function () { Barba.Pjax.getTransition = function () { return PageTransitionTop }, $(".js-contact").on("click", function () { $(".menuIcon").removeClass("js-menuOpen"), $(".global-nav").removeClass("js-open"), $.fn.fullpage.moveTo("contact"), Barba.Pjax.getTransition = function () { return PageTransitionTop } }) }, onLeaveCompleted: function () { $.fn.fullpage.destroy("all") } }); topTransition.init(); var underLayer = Barba.BaseView.extend({ namespace: "under", onEnter: function () { Barba.Pjax.getTransition = function () { return PageTransitionUnder }, $(window).scroll(function () { $(".js-scroll").each(function () { $(window).scrollTop() + $(window).height() > $(this).offset().top && $(this).addClass("in") }) }), isSp && $(".page-top").height($(window).height()) }, onEnterCompleted: function () { headerColor(), anime.timeline({ duration: 500, easing: "easeInOutCubic" }).add({ targets: ".btn-wrap", translateY: ["110%", 0] }).add({ targets: ".back-arrow svg", translateX: ["100%", 0], offset: "-=500" }).add({ targets: ".scrollDown", translateY: ["180%", 0], offset: "-=500" }) }, onLeave: function () { state = 1, anime.timeline({ duration: 500, easing: "easeInOutCubic" }).add({ targets: ".btn-wrap", translateY: [0, "110%"] }).add({ targets: ".back-arrow svg", translateX: [0, "-100%"], offset: "-=500" }) }, onLeaveCompleted: function () { fullPage(), state = 0, anime.timeline({ duration: 500, easing: "easeInOutCubic" }).add({ targets: ".active .page-num p", translateY: ["100%", 0], translateZ: 0 }).add({ targets: "#fp-nav ul", translateY: [fpnav.y, 0], translateX: [fpnav.x, 0], translateZ: 0, offset: "-=500" }).add({ targets: ".fullpage__slide", background: ["#020b16", "rgba(0,0,0,0)"], offset: "-=500" }).add({ targets: ".active .btn-wrap", translateY: ["110%", 0], translateZ: 0, offset: "-=500" }) } }); underLayer.init(); var PageTransitionTop = Barba.BaseTransition.extend({ start: function () { this.open().then(this.newContainerLoading).then(this.finish.bind(this)) }, open: function () { return new Promise(function (e) { anime.timeline({ duration: 500, easing: "easeInOutCubic", complete: function () { e() } }).add({ targets: ".active .image", width: [image.width, imageBig.width], height: [image.height, imageBig.height], marginRight: [image.marginRight, 0], marginLeft: [image.marginLeft, imageBig.marginLeft], top: [image.top, imageBig.top] }).add({ targets: ".fullpage__slide", background: ["rgba(0,0,0,0)", "#020b16"], offset: "-=500" }).add({ targets: ".page-num p", translateY: [0, "100%"], translateZ: 0, offset: "-=500" }).add({ targets: "#fp-nav ul", translateY: [0, fpnav.y], translateX: [0, fpnav.x], translateZ: 0, offset: "-=500" }).add({ targets: ".active .btn-wrap", translateY: [0, "110%"], translateZ: 0, offset: "-=500" }).play() }) }, finish: function () { this.done() } }), PageTransitionCurtain = Barba.BaseTransition.extend({ start: function () { this.open().then(this.newContainerLoading).then(this.finish.bind(this)) }, open: function () { return new Promise(function (e) { anime({ targets: ".curtain", translateY: ["100%", 0], translateZ: 0, duration: 800, easing: "easeInOutCubic", complete: function () { $(".menuIcon").removeClass("js-menuOpen"), $(".global-nav").removeClass("js-open"), $("body,html").scrollTop(0), e() } }) }) }, finish: function () { anime({ targets: ".curtain", translateY: [0, "-100%"], translateZ: 0, duration: 800, easing: "easeInOutCubic" }), this.done() } }), PageTransitionUnder = Barba.BaseTransition.extend({ start: function () { this.close().then(this.newContainerLoading).then(this.finish.bind(this)) }, close: function () { var e = this; return new Promise(function (t) { var n = anime.timeline({ duration: 500, easing: "easeInOutCubic", autoplay: !1, complete: function () { t() } }).add({ targets: ".page-top .image", width: [imageBig.width, image.width], height: [imageBig.height, image.height], marginRight: [0, image.marginRight], marginLeft: [imageBig.marginLeft, image.marginLeft], top: [imageBig.top, image.top] }); 0 !== $(window).scrollTop() ? $("body,html").animate({ scrollTop: 0 }, 500, "swing", n.play) : n.play() }) }, finish: function () { var e = this; anime({ targets: ".page-top .image", opacity: [1, 0], duration: 200, easing: "linear", complete: function () { e.done(), anime({ targets: ".active .image", opacity: [0, 1], duration: 400, easing: "easeOutCubic" }) } }) } }); $(function () { Barba.Pjax.start(), Barba.Prefetch.init(), Barba.Utils.xhrTimeout = 1e4 });